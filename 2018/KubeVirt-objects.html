<!doctype html>
<html lang="en">

  <head>
    <!-- Adding Adobe Analytics -->
    <script id="dpal" src="//www.redhat.com/ma/dpal.js" type="text/javascript"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1, shrink-to-fit=no" >
    <meta name="go-import" content="kubevirt.io/kubevirt git https://github.com/kubevirt/kubevirt">
    <meta name="go-import" content="kubevirt.io/client-go git https://github.com/kubevirt/client-go">
    <meta name="go-import" content="kubevirt.io/containerized-data-importer git https://github.com/kubevirt/containerized-data-importer">
    <meta name="go-import" content="kubevirt.io/hostpath-provisioner git https://github.com/kubevirt/hostpath-provisioner">
    <meta name="go-import" content="kubevirt.io/hostpath-provisioner-operator git https://github.com/kubevirt/hostpath-provisioner-operator">
    <meta name="go-import" content="kubevirt.io/qe-tools git https://github.com/kubevirt/qe-tools">
    <meta name="go-import" content="kubevirt.io/machine-remediation git https://github.com/kubevirt/machine-remediation">
    <meta name="go-import" content="kubevirt.io/cloud-provider-kubevirt git https://github.com/kubevirt/cloud-provider-kubevirt">
    <meta name="go-import" content="kubevirt.io/controller-lifecycle-operator-sdk git https://github.com/kubevirt/controller-lifecycle-operator-sdk">
    <meta name="go-import" content="kubevirt.io/ssp-operator git https://github.com/kubevirt/ssp-operator">
    <meta name="go-import" content="kubevirt.io/cpu-nfd-plugin git https://github.com/kubevirt/cpu-nfd-plugin">
    <meta name="go-import" content="kubevirt.io/containerized-data-importer-api git https://github.com/kubevirt/containerized-data-importer-api">
    <meta name="go-import" content="kubevirt.io/api git https://github.com/kubevirt/api">
    <meta name="go-import" content="kubevirt.io/node-maintenance-operator git https://github.com/kubevirt/node-maintenance-operator">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="/assets/favicon/site.webmanifest">
    <link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#00aba9">
    <meta name="theme-color" content="#ffffff">
    <meta name="google-site-verification" content="eaETLLM6xObn1li9l9eU8lNIBgBpU0OQLXV1faU1svE" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="https://kubevirt.io//2018/KubeVirt-objects.html">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    
    <title>Kubevirt Objects | KubeVirt.io</title>
    <!-- # Opengraph protocol properties: https://ogp.me/ -->
    <meta name="author" content="jcpowermac" >
    <meta property="og:type" content="article" >
    <meta name="twitter:card" content="summary">
    <meta name="description" content="In this post we will go over the objects provided by KubeVirt">
    <meta name="keywords" content="custom resources, kubevirt objects, objects, VirtualMachine" >
    <meta property="og:title" content="Kubevirt Objects | KubeVirt.io">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kubevirt.io//2018/KubeVirt-objects.html" >
    <meta property="og:image" content="https://kubevirt.io//assets/images/KubeVirt_logo_color.png">
    <meta property="og:description" content="In this post we will go over the objects provided by KubeVirt" >
    <meta property="og:site_name" content="KubeVirt.io" >
    <meta property="og:article:author" content="jcpowermac" >
    <meta property="og:article:published_time" content="2018-05-08 00:00:00 +0000" >
    <meta name="twitter:title" content="Kubevirt Objects | KubeVirt.io">
    <meta name="twitter:description" content="In this post we will go over the objects provided by KubeVirt">

    <link type="application/atom+xml" rel="alternate" href="https://kubevirt.io//feed.xml" title="KubeVirt.io" />
    <script src="//code.jquery.com/jquery.min.js"></script>
    
    <!-- Photoswipe.com gallery-->

    <!-- Core CSS file -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.css">

    <!-- Skin CSS file (styling of UI - buttons, caption, etc.)
        In the folder of skin CSS file there are also:
        - .png and .svg icons sprite,
        - preloader.gif (for browsers that do not support CSS animations) -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/default-skin/default-skin.min.css">
</head>


  <body>
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" role="navigation">
        <a class="navbar-brand" href="/">
    <img src="/assets/images/KubeVirt_logo_color.svg" class="navbar-brand-image d-inline-block align-top" alt="KubeVirt.io">
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <i class="fas fa-th-large"></i>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav">
      

      
        <li  class="nav-item active" >
          <a class="nav-link text-uppercase" href="/blogs/">Blogs</a>
        </li>
      
        <li  class="nav-item" >
          <a class="nav-link text-uppercase" href="/videos/">Videos</a>
        </li>
      
        <li  class="nav-item" >
          <a class="nav-link text-uppercase" href="/gallery/">Gallery</a>
        </li>
      
        <li  class="nav-item" >
          <a class="nav-link text-uppercase" href="//kubevirt.io/user-guide">Docs</a>
        </li>
      
        <li  class="nav-item" >
          <a class="nav-link text-uppercase" href="/labs/">Labs</a>
        </li>
      
        <li  class="nav-item" >
          <a class="nav-link text-uppercase" href="/community/">Community</a>
        </li>
      

      <li class='nav-item'>
        <form action="/search.html" class="nav-item__search" method="get" autocomplete="off">
          <div class="autocomplete" style="width:150px;">
            <input type="text" id="search-input" class="docs-search--input" placeholder="search term" name="query">
          </div>
          <input id="search-button" type="submit" value="🔍" disabled='true'>
        </form>
      </li>

    </ul>
  </div>
<script>
function autocomplete(inp, arr) {
  /*the autocomplete function takes two arguments,
  the text field element and an array of possible autocompleted values:*/
  var currentFocus;
  /*execute a function when someone writes in the text field:*/
  inp.addEventListener("input", function(e) {
      var a, b, i, val = this.value;
      /*close any already open lists of autocompleted values*/
      closeAllLists();
      if (!val) { return false;}
      currentFocus = -1;
      /*create a DIV element that will contain the items (values):*/
      a = document.createElement("DIV");
      a.setAttribute("id", this.id + "autocomplete-list");
      a.setAttribute("class", "autocomplete-items");
      /*append the DIV element as a child of the autocomplete container:*/
      this.parentNode.appendChild(a);
      /*for each item in the array...*/
      for (i = 0; i < arr.length; i++) {
        /*check if the item starts with the same letters as the text field value:*/
        if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
          /*create a DIV element for each matching element:*/
          b = document.createElement("DIV");
          /*make the matching letters bold:*/
          b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
          b.innerHTML += arr[i].substr(val.length);
          /*insert a input field that will hold the current array item's value:*/
          b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
          /*execute a function when someone clicks on the item value (DIV element):*/
              b.addEventListener("click", function(e) {
              /*insert the value for the autocomplete text field:*/
              inp.value = this.getElementsByTagName("input")[0].value;
              /*close the list of autocompleted values,
              (or any other open lists of autocompleted values:*/
              closeAllLists();
          });
          a.appendChild(b);
        }
      }
  });
  /*execute a function presses a key on the keyboard:*/
  inp.addEventListener("keydown", function(e) {
      document.getElementById("search-button").disabled= undefined;
      var x = document.getElementById(this.id + "autocomplete-list");
      if (x) x = x.getElementsByTagName("div");
      if (e.keyCode == 40) {
        /*If the arrow DOWN key is pressed,
        increase the currentFocus variable:*/
        currentFocus++;
        /*and and make the current item more visible:*/
        addActive(x);
      } else if (e.keyCode == 38) { //up
        /*If the arrow UP key is pressed,
        decrease the currentFocus variable:*/
        currentFocus--;
        /*and and make the current item more visible:*/
        addActive(x);
      } else if (e.keyCode == 13) {
        /*If the ENTER key is pressed, prevent the form from being submitted,*/
        if (currentFocus > -1) {
          /*and simulate a click on the "active" item:*/
          if (x) {
            x[currentFocus].click();
            e.preventDefault();
          }
        }
        if (document.getElementById("search-input").value == "") {
          e.preventDefault();
        }
      }
  });
  function addActive(x) {
    /*a function to classify an item as "active":*/
    if (!x) return false;
    /*start by removing the "active" class on all items:*/
    removeActive(x);
    if (currentFocus >= x.length) currentFocus = 0;
    if (currentFocus < 0) currentFocus = (x.length - 1);
    /*add class "autocomplete-active":*/
    x[currentFocus].classList.add("autocomplete-active");
  }
  function removeActive(x) {
    /*a function to remove the "active" class from all autocomplete items:*/
    for (var i = 0; i < x.length; i++) {
      x[i].classList.remove("autocomplete-active");
    }
  }
  function closeAllLists(elmnt) {
    /*close all autocomplete lists in the document,
    except the one passed as an argument:*/
    var x = document.getElementsByClassName("autocomplete-items");
    for (var i = 0; i < x.length; i++) {
      if (elmnt != x[i] && elmnt != inp) {
      x[i].parentNode.removeChild(x[i]);
    }
  }
}
/*execute a function when someone clicks in the document:*/
document.addEventListener("click", function (e) {
    closeAllLists(e.target);
});
}
</script>

<script>
var mykeywords = ["libvirt", "KubeVirt", "ClearContainers", "virtlet", "CRI", "OpenStack", "ovirt", "release notes", "changelog", "hilights", "network", "flannel", "kubevirt-ansible", "Skydive", "openshift", "glusterfs", "heketi", "virtual machine", "weavenet", "custom resources", "kubevirt objects", "objects", "VirtualMachine", "api", "rbac", "roles", "storage", "ovn", "kubetron", "neutron", "vscode", "development", "debug", "istio", "iptables", "tproxy", "service mesh", "ebtables", "docker", "container", "build", "multus", "roadmap", "kvm", "qemu", "device plugins", "unit testing", "review", "hugepages", "kubevirtci", "ci-cd", "cicd", "memory", "overcommitment", "networking", "CNI", "multiple networks", "ovs-cni", "import", "clone", "upload", "disk image", "cdi", "datavolumes", "volume types", "serviceaccount", "ignition", "coreos", "rhcos", "kubecon", "conference", "gcp", "autodeployer", "metrics", "prometheus", "grafana", "federation", "kubefed", "multicluster", "HCO", "hyperconverged operator", "ansible", "vagrant", "lifecycle", "virtual machines", "website", "community", "vm import", "node drain", "eviction", "nmo", "condition types", "Condition types", "CNCF", "sandbox", "lab", "cri-o", "quickstart", "homelab", "kubernetes", "kubevirt installation", "rook", "ceph", "ntp", "chronyd", "prow", "infrastructure", "kubevirt-tutorial", "CI-CD", "continuous integration", "jenkins", "noVNC", "console", "KubeCon", "cloudnativecon", "America", "talk", "gathering", "contra-lib", "admin", "operations", "create vm", "start vm", "connect to console", "connect to ssh", "stop vm", "remove vm", "operator manual", "basic operations", "laboratory", "installing kubevirt", "use kubevirt", "admin operations", "CDI", "containerized data importer", "octant", "okd", "openshift console", "cockpit", "user interface", "web interface", "virtVNC", "OKD console", "kubevirt upgrade", "upgrading", "OpenShift web console", "OKD", "video", "virtual machine management", "NUMA", "CPU pinning", "QEMU", "KVM", "GPU", "NVIDIA", "GPU workloads", "pass-through", "passthrough", "kubevirt", "Microsoft Windows kubernetes", "Microsoft Windows container", "Windows", "VM", "Advanced VM scheduling", "affinity", "scheduling", "topologyKeys", "Live Migration", "design", "architecture", "security", "operation", "images", "Kubernetes", "windows", "common-templates", "minikube", "addons", "oVirt", "kubevirt-hyperconverged", "cnao", "cluster-network-addons-operator", "kubernetes-nmstate", "nmstate", "bridge", "containerDisk", "registry", "composer-cli", "virt-customize", "builder tool", "prometheus-operator", "node-exporter", "monitoring", "event", "Tekton Pipelines", "KubeVirt Tekton Tasks", "vGPU", "Intel", "Fedora", "go", "authentication", "mesh", "AWS", "EC2", "AMI", "real-time", "CPUManager", "live migration", "dedicated network", "Kubevirt", "load-balancer", "MetalLB", "instancetypes", "preferences", "VirtualMachineInstancetype", "VirtualMachinePreference", ]
autocomplete(document.getElementById("search-input"), mykeywords);
</script>

<script src="/js/clipboard.min.js"></script>

    </nav>

    <main role="main" style="margin-top: 60px;">
      <div class="container">
  <div class="row">
    <div class="col">
      <div class="post">
        <header class="post-header">
          <h1></h1>
          <h1 class="post-title">Kubevirt Objects</h1>
          <div class="post-info">
            <span class="post-author">Author: jcpowermac</span>
            <div>
              <span class="post-category-name">
                Tags: <a href="/tag/custom-resources">custom resources</a>&nbsp;|&nbsp;<a href="/tag/kubevirt-objects">kubevirt objects</a>&nbsp;|&nbsp;<a href="/tag/objects">objects</a>&nbsp;|&nbsp;<a href="/tag/virtualmachine">VirtualMachine</a>
              </span>
            </div>
            <div>
              <span class="post-meta">Publication Date: May 8, 2018  </span>
            </div>
            <div>
              <span class="post-category-name">
                Category: uncategorized
              </span>
            </div>

          </div>
        </header>
        <article class="post-content">
          <p>The <a href="https://github.com/kubevirt/kubevirt/">KubeVirt</a> project provides extensions to Kubernetes via <a href="https://kubernetes.io/docs/concepts/api-extension/custom-resources/">custom resources</a>.</p>

<p>These resources are a collection a API objects that defines a virtual machine within Kubernetes.</p>

<p>I think it’s important to point out the two great resources that I used to
compile information for this post:</p>

<ul>
  <li><a href="http://kubevirt.io/user-guide/">user-guide</a></li>
  <li><a href="http://kubevirt.io/api-reference/">api-reference</a></li>
</ul>

<p>With that let’s take a look at the objects that are available.</p>

<h1 id="kubevirt-top-level-objects">KubeVirt top-level objects</h1>

<p>Below is a list of the top level API objects and descriptions that KubeVirt provides.</p>

<ul>
  <li>
    <p>VirtualMachine (vm[s]) - represents a virtual machine in the runtime environment of Kubernetes.</p>
  </li>
  <li>
    <p>OfflineVirtualMachine (ovm[s]) - handles the virtual machines that are not running or are in a stopped state.</p>
  </li>
  <li>
    <p>VirtualMachinePreset (vmpreset[s]) - is an extension to general VirtualMachine configuration behaving much like PodPresets from Kubernetes. When a VirtualMachine is created, any applicable VirtualMachinePresets will be applied to the existing spec for the VirtualMachine. This allows for re-use of common settings that should apply to multiple VirtualMachines.</p>
  </li>
  <li>
    <p>VirtualMachineReplicaSet (vmrs[s]) - tries to ensures that a specified number of VirtualMachine replicas are running at any time.</p>
  </li>
</ul>

<p><a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_domainspec">DomainSpec</a> is listed as a top-level object but is only used within all of the objects above. Currently the <code class="language-plaintext highlighter-rouge">DomainSpec</code> is a subset of what is configurable via <a href="https://libvirt.org/formatdomain.html">libvirt domain XML</a>.</p>

<h2 id="virtualmachine">VirtualMachine</h2>

<p>VirtualMachine is mortal object just like a
<a href="https://kubernetes.io/docs/concepts/workloads/pods/pod/">Pod</a> within Kubernetes.
It only runs once and cannot be resurrected. This might seem problematic especially
to an administrator coming from a traditional virtualization background. Fortunately
later we will discuss OfflineVirtualMachines which will address this.</p>

<p>First let’s use <code class="language-plaintext highlighter-rouge">kubectl</code> to retrieve a list of <code class="language-plaintext highlighter-rouge">VirtualMachine</code> objects.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl get vms -n nodejs-ex
NAME      AGE
mongodb   5d
nodejs    5d
</code></pre></div></div>

<p>We can also use <code class="language-plaintext highlighter-rouge">kubectl describe</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl describe vms -n test
Name:         testvm
Namespace:    test
Labels:       guest=testvm
              kubevirt.io/nodeName=kn2.virtomation.com
              kubevirt.io/size=small
...output...
Events:
  Type    Reason              Age                From                               Message
  ----    ------              ----               ----                               -------
  Normal  SuccessfulCreate    59m                virtualmachine-controller          Created virtual machine pod virt-launcher-testvm-8h927
  Normal  SuccessfulHandOver  59m                virtualmachine-controller          Pod owner ship transfered to the node virt-launcher-testvm-8h927
  Normal  Created             59m (x2 over 59m)  virt-handler, kn2.virtomation.com  VM defined.
  Normal  Started             59m                virt-handler, kn2.virtomation.com  VM started.

</code></pre></div></div>

<p>And just in case if you want to return the yaml definition of a <code class="language-plaintext highlighter-rouge">VirtualMachine</code> object here is an example.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl -o yaml get vms mongodb -n nodejs-ex
apiVersion: kubevirt.io/v1alpha1
kind: VirtualMachine
...output...
</code></pre></div></div>

<p>The first object we will annotate is <code class="language-plaintext highlighter-rouge">VirtualMachine</code>. The important sections <code class="language-plaintext highlighter-rouge">.spec</code> for <code class="language-plaintext highlighter-rouge">VirtualMachineSpec</code> and <code class="language-plaintext highlighter-rouge">.spec.domain</code> for <code class="language-plaintext highlighter-rouge">DomainSpec</code> will be annotated only in this section then referred to in the other object sections.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kubevirt.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">VirtualMachine</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">annotations</span><span class="pi">:</span> <span class="pi">{}</span>
  <span class="na">labels</span><span class="pi">:</span> <span class="pi">{}</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">string</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">string</span>
<span class="na">spec</span><span class="pi">:</span> <span class="pi">{}</span>
</code></pre></div></div>

<h3 id="node-placement">Node Placement</h3>

<p>Kubernetes has the ability to schedule a pod to specific nodes based on <a href="https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#node-affinity-beta-feature">affinity and anti-affinity</a> rules.</p>

<p><a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_nodeaffinity">Node affinity</a> is also possible with KubeVirt. To <a href="hhttps://kubevirt.io/user-guide/operations/node_assignment/#affinity-and-anti-affinity">constrain a virtual machine</a> to run on a node define a matching expressions using node labels.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">affinity</span><span class="pi">:</span>
  <span class="na">nodeAffinity</span><span class="pi">:</span>
    <span class="na">preferredDuringSchedulingIgnoredDuringExecution</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">preference</span><span class="pi">:</span>
          <span class="na">matchExpressions</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">key</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">operator</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">values</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">string</span>
        <span class="na">weight</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">requiredDuringSchedulingIgnoredDuringExecution</span><span class="pi">:</span>
      <span class="na">nodeSelectorTerms</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">matchExpressions</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">key</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">operator</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">values</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">string</span>
</code></pre></div></div>

<p>A virtual machine can also more easily be constrained by using <a href="https://kubevirt.io/user-guide/operations/node_assignment/#nodeselector">nodeSelector</a> which is defined by node’s label and value. Here is an example</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">nodeSelector</span><span class="pi">:</span>
  <span class="na">kubernetes.io/hostname</span><span class="pi">:</span> <span class="s">kn1.virtomation.com</span>
</code></pre></div></div>

<h3 id="clocks-and-timers">Clocks and Timers</h3>

<p>Configures the <a href="https://kubevirt.io/user-guide/virtual_machines/virtual_hardware/#clock">virtualize hardware</a> clock provided by <a href="https://www.qemu.org/docs/master/system/invocation.html#hxtool-9">QEMU</a>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">domain</span><span class="pi">:</span>
  <span class="na">clock</span><span class="pi">:</span>
    <span class="na">timezone</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">utc</span><span class="pi">:</span>
      <span class="na">offsetSeconds</span><span class="pi">:</span> <span class="m">0</span>
</code></pre></div></div>

<p>The <a href="https://kubevirt.io/user-guide/virtual_machines/virtual_hardware/#timers">timer</a> defines the <a href="https://libvirt.org/formatdomain.html#elementsTime">type and policy attribute</a> that determines what action is take when QEMU misses a deadline for injecting a tick to the guest.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">domain</span><span class="pi">:</span>
  <span class="na">clock</span><span class="pi">:</span>
    <span class="na">timer</span><span class="pi">:</span>
      <span class="na">hpet</span><span class="pi">:</span>
        <span class="na">present</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">tickPolicy</span><span class="pi">:</span> <span class="s">string</span>
      <span class="na">hyperv</span><span class="pi">:</span>
        <span class="na">present</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">kvm</span><span class="pi">:</span>
        <span class="na">present</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">pit</span><span class="pi">:</span>
        <span class="na">present</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">tickPolicy</span><span class="pi">:</span> <span class="s">string</span>
      <span class="na">rtc</span><span class="pi">:</span>
        <span class="na">present</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">tickPolicy</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">track</span><span class="pi">:</span> <span class="s">string</span>
</code></pre></div></div>

<h3 id="cpu-and-memory">CPU and Memory</h3>

<p>The number of <a href="https://kubevirt.io/user-guide/virtual_machines/virtual_hardware/#cpu">CPU cores</a> a virtual machine will be assigned. <a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_cpu">.spec.domain.cpu.cores</a> will not be used for scheduling use <a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_resourcerequirements">.spec.domain.resources.requests.cpu</a> instead.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cpu</span><span class="pi">:</span>
  <span class="na">cores</span><span class="pi">:</span> <span class="m">1</span>
</code></pre></div></div>

<p>There are two supported <a href="https://kubevirt.io/user-guide/virtual_machines/virtual_hardware/#resources-requests-and-limits">resource limits and requests</a>: <code class="language-plaintext highlighter-rouge">cpu</code> and <code class="language-plaintext highlighter-rouge">memory</code>. A <code class="language-plaintext highlighter-rouge">.spec.domain.resources.requests.memory</code> should be defined to determine the allocation of memory provided to the virtual machine. These values will be used to in scheduling decisions.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">resources</span><span class="pi">:</span>
  <span class="na">limits</span><span class="pi">:</span> <span class="pi">{}</span>
  <span class="na">requests</span><span class="pi">:</span> <span class="pi">{}</span>
</code></pre></div></div>

<h3 id="watchdog-devices">Watchdog Devices</h3>

<p><a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_watchdog">.spec.domain.watchdog</a> automatically triggers an action via <a href="https://libvirt.org/formatdomain.html#elementsWatchdog">Libvirt</a> and <a href="https://www.qemu.org/docs/master/system/invocation.html#hxtool-9">QEMU</a> when the virtual machine operating system hangs or crashes.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">watchdog</span><span class="pi">:</span>
  <span class="na">i6300esb</span><span class="pi">:</span>
    <span class="na">action</span><span class="pi">:</span> <span class="s">string</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">string</span>
</code></pre></div></div>

<h3 id="features">Features</h3>

<p><a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_features">.spec.domain.features</a>
are hypervisor cpu or machine features that can be enabled.
After reviewing both Linux and Microsoft QEMU virtual machines managed by
<a href="https://libvirt.org/formatdomain.html#elementsFeatures">Libvirt</a>
both acpi and
<a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_featureapic">apic</a>
should be enabled.
The <a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_featurehyperv">hyperv</a> features should be enabled only for Windows-based virtual machines. For additional information regarding features please visit the <a href="https://kubevirt.io/user-guide/virtual_machines/virtual_hardware/#features">virtual hardware configuration</a> in the kubevirt user guide.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">features</span><span class="pi">:</span>
  <span class="na">acpi</span><span class="pi">:</span>
    <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">apic</span><span class="pi">:</span>
    <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">endOfInterrupt</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">hyperv</span><span class="pi">:</span>
    <span class="na">relaxed</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">reset</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">runtime</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">spinlocks</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">spinlocks</span><span class="pi">:</span> <span class="m">0</span>
    <span class="na">synic</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">synictimer</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">vapic</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">vendorid</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">vendorid</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">vpindex</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<h3 id="qemu-machine-type">QEMU Machine Type</h3>

<p><a href="https://kubevirt.io/user-guide/virtual_machines/virtual_hardware/#machine-type">.spec.domain.machine.type</a> is the emulated machine architecture provided by <a href="https://www.qemu.org/docs/master/system/invocation.html#hxtool-0">QEMU</a>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">machine</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
</code></pre></div></div>

<p>Here is an example how to retrieve the supported QEMU machine types.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nv">$ </span>qemu-system-x86_64 <span class="nt">--machine</span> <span class="nb">help
    </span>Supported machines are:
    ...output...
    pc                   Standard PC <span class="o">(</span>i440FX + PIIX, 1996<span class="o">)</span> <span class="o">(</span><span class="nb">alias </span>of pc-i440fx-2.10<span class="o">)</span>
    pc-i440fx-2.10       Standard PC <span class="o">(</span>i440FX + PIIX, 1996<span class="o">)</span> <span class="o">(</span>default<span class="o">)</span>
    ...output...
    q35                  Standard PC <span class="o">(</span>Q35 + ICH9, 2009<span class="o">)</span> <span class="o">(</span><span class="nb">alias </span>of pc-q35-2.10<span class="o">)</span>
    pc-q35-2.10          Standard PC <span class="o">(</span>Q35 + ICH9, 2009<span class="o">)</span>
</code></pre></div></div>

<h3 id="disks-and-volumes">Disks and Volumes</h3>

<p><a href="https://kubevirt.io/api-reference/master/definitions.html#_v1_disk">.spec.domain.devices.disks</a> configures a <a href="https://www.qemu.org/docs/master/system/invocation.html#hxtool-1">QEMU</a> type of <a href="https://libvirt.org/formatdomain.html#elementsDisks">disk</a> to the virtual machine and assigns a specific <a href="https://kubevirt.io/user-guide/virtual_machines/disks_and_volumes/#containerdisk">volume and its type to that disk</a> via the <code class="language-plaintext highlighter-rouge">volumeName</code>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">devices</span><span class="pi">:</span>
  <span class="na">disks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">cdrom</span><span class="pi">:</span>
        <span class="na">bus</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">readonly</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">tray</span><span class="pi">:</span> <span class="s">string</span>
      <span class="na">disk</span><span class="pi">:</span>
        <span class="na">bus</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">readonly</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">floppy</span><span class="pi">:</span>
        <span class="na">readonly</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">tray</span><span class="pi">:</span> <span class="s">string</span>
      <span class="na">lun</span><span class="pi">:</span>
        <span class="na">bus</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">readonly</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">string</span>
      <span class="na">volumeName</span><span class="pi">:</span> <span class="s">string</span>
</code></pre></div></div>

<p><a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_cloudinitnocloudsource">cloudInitNoCloud</a>
injects scripts and configuration into a virtual machine operating system.
There are three different parameters that can be used to provide the
cloud-init coniguration: <code class="language-plaintext highlighter-rouge">secretRef</code>, <code class="language-plaintext highlighter-rouge">userData</code> or <code class="language-plaintext highlighter-rouge">userDataBase64</code>.</p>

<p>See the user-guide for examples of how to use <a href="https://kubevirt.io/user-guide/virtual_machines/startup_scripts/#cloud-init-examples">.spec.volumes.cloudInitNoCloud</a>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">volumes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">cloudInitNoCloud</span><span class="pi">:</span>
      <span class="na">secretRef</span><span class="pi">:</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">string</span>
      <span class="na">userData</span><span class="pi">:</span> <span class="s">string</span>
      <span class="na">userDataBase64</span><span class="pi">:</span> <span class="s">string</span>
</code></pre></div></div>

<p>An <a href="https://kubevirt.io/user-guide/virtual_machines/disks_and_volumes/#emptydisk">emptyDisk volume</a> creates an extra qcow2 disk that is created with the virtual machine. It will be removed if the <code class="language-plaintext highlighter-rouge">VirtualMachine</code> object is deleted.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">emptyDisk</span><span class="pi">:</span>
  <span class="na">capacity</span><span class="pi">:</span> <span class="s">string</span>
</code></pre></div></div>

<p><a href="https://kubevirt.io/user-guide/virtual_machines/disks_and_volumes/#ephemeral">Ephemeral volume</a> creates a temporary local copy on write image storage that will be discarded when the <code class="language-plaintext highlighter-rouge">VirtualMachine</code> is removed.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">ephemeral</span><span class="pi">:</span>
  <span class="na">persistentVolumeClaim</span><span class="pi">:</span>
    <span class="na">claimName</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">readOnly</span><span class="pi">:</span> <span class="no">true</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">string</span>
</code></pre></div></div>

<p><a href="https://kubevirt.io/user-guide/virtual_machines/disks_and_volumes/#persistentvolumeclaim">persistentVolumeClaim volume</a> persists after the <code class="language-plaintext highlighter-rouge">VirtualMachine</code> is deleted.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">persistentVolumeClaim</span><span class="pi">:</span>
  <span class="na">claimName</span><span class="pi">:</span> <span class="s">string</span>
  <span class="na">readOnly</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<p><a href="https://kubevirt.io/user-guide/virtual_machines/disks_and_volumes/#containerdisk">registryDisk volume</a> type uses a virtual machine disk that is stored in a container image registry.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">registryDisk</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">string</span>
  <span class="na">imagePullSecret</span><span class="pi">:</span> <span class="s">string</span>
</code></pre></div></div>

<h3 id="virtual-machine-status">Virtual Machine Status</h3>

<p>Once the <code class="language-plaintext highlighter-rouge">VirtualMachine</code> object has been created the <a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_virtualmachinestatus">VirtualMachineStatus</a> will be available. <a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_virtualmachinestatus">VirtualMachineStatus</a> can be used in automation tools such as Ansible to confirm running state, determine where a <code class="language-plaintext highlighter-rouge">VirtualMachine</code> is running via <code class="language-plaintext highlighter-rouge">nodeName</code> or the <code class="language-plaintext highlighter-rouge">ipAddress</code> of the virtual machine operating system.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl -o yaml get vm mongodb -n nodejs-ex

# ...output...
status:
  interfaces:
  - ipAddress: 10.244.2.7
  nodeName: kn2.virtomation.com
  phase: Running
</code></pre></div></div>

<p>Example using <code class="language-plaintext highlighter-rouge">--template</code> to retrieve the <code class="language-plaintext highlighter-rouge">.status.phase</code> of the <code class="language-plaintext highlighter-rouge">VirtualMachine</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get vm mongodb --template {{.status.phase}} -n nodejs-ex
Running
</code></pre></div></div>

<h3 id="examples">Examples</h3>

<ul>
  <li><a href="https://kubevirt.io/user-guide/virtual_machines/virtual_machine_instances/#virtualmachineinstance-api">https://kubevirt.io/user-guide/virtual_machines/virtual_machine_instances/#virtualmachineinstance-api</a></li>
</ul>

<h2 id="offlinevirtualmachine">OfflineVirtualMachine</h2>

<p>An OfflineVirtualMachine is an immortal object within KubeVirt. The VirtualMachine
described within the spec will be recreated with a start power operation, host issue
or simply a accidental deletion of the VirtualMachine object.
For a traditional virtual administrator this object might be appropriate for
most use-cases.</p>

<p>Just like <code class="language-plaintext highlighter-rouge">VirtualMachine</code> we can retrieve the <code class="language-plaintext highlighter-rouge">OfflineVirtualMachine</code> objects.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl get ovms -n nodejs-ex
NAME      AGE
mongodb   5d
nodejs    5d
</code></pre></div></div>

<p>And display the object in yaml.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl -o yaml get ovms mongodb -n nodejs-ex
apiVersion: kubevirt.io/v1alpha1
kind: OfflineVirtualMachine
metadata:
...output...
</code></pre></div></div>

<p>We continue by annotating <code class="language-plaintext highlighter-rouge">OfflineVirtualMachine</code> object.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kubevirt.io/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">OfflineVirtualMachine</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">annotations</span><span class="pi">:</span> <span class="pi">{}</span>
  <span class="na">labels</span><span class="pi">:</span> <span class="pi">{}</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">string</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">string</span>
<span class="na">spec</span><span class="pi">:</span>
</code></pre></div></div>

<h3 id="what-is-running-in-offlinevirtualmachine">What is Running in OfflineVirtualMachine?</h3>

<p><a href="https://kubevirt.io/api-reference/master/definitions.html#_v1_offlinevirtualmachinespec">.spec.running</a> controls whether the associated VirtualMachine object is created. In other words this changes the <a href="https://kubevirt.io/user-guide/virtual_machines/lifecycle/#stopping-a-virtual-machine">power status</a> of the virtual machine.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  running: true
</code></pre></div></div>

<p>This will create a <code class="language-plaintext highlighter-rouge">VirtualMachine</code> object which will instantiate and power on a virtual machine.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl patch offlinevirtualmachine mongodb --type merge -p '{"spec":{"running":true }}' -n nodejs-ex
</code></pre></div></div>

<p>This will delete the <code class="language-plaintext highlighter-rouge">VirtualMachine</code> object which will power off the virtual machine.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl patch offlinevirtualmachine mongodb --type merge -p '{"spec":{"running":false }}' -n nodejs-ex
</code></pre></div></div>

<p>And if you would rather not have to remember the <code class="language-plaintext highlighter-rouge">kubectl patch</code> command above
the KubeVirt team has provided a cli tool <code class="language-plaintext highlighter-rouge">virtctl</code> that can start and stop
a guest.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./virtctl start mongodb <span class="nt">-n</span> nodejs-ex
./virtctl stop mongodb <span class="nt">-n</span> nodejs-ex
</code></pre></div></div>

<h3 id="offline-virtual-machine-status">Offline Virtual Machine Status</h3>

<p>Once the <code class="language-plaintext highlighter-rouge">OfflineVirtualMachine</code> object has been created the <a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_offlinevirtualmachinestatus">OfflineVirtualMachineStatus</a> will be available. Like <code class="language-plaintext highlighter-rouge">VirtualMachineStatus</code> <code class="language-plaintext highlighter-rouge">OfflineVirtualMachineStatus</code> can be used for automation tools such as Ansible.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl -o yaml get ovms mongodb -n nodejs-ex

# ...output...
status:
  created: true
  ready: true
</code></pre></div></div>

<p>Example using <code class="language-plaintext highlighter-rouge">--template</code> to retrieve the <code class="language-plaintext highlighter-rouge">.status.conditions[0].type</code> of <code class="language-plaintext highlighter-rouge">OfflineVirtualMachine</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl get ovm mongodb --template "{{.status.ready}}" -n nodejs-ex
true
</code></pre></div></div>

<h2 id="virtualmachinereplicaset">VirtualMachineReplicaSet</h2>

<p><a href="https://kubevirt.io/user-guide/virtual_machines/replicaset/">VirtualMachineReplicaSet</a> is great when you want to run multiple identical virtual machines.</p>

<p>Just like the other top-level objects we can retrieve <code class="language-plaintext highlighter-rouge">VirtualMachineReplicaSet</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl get vmrs -n nodejs-ex
NAME      AGE
replica   1m
</code></pre></div></div>

<p>With the <code class="language-plaintext highlighter-rouge">replicas</code> parameter set to <code class="language-plaintext highlighter-rouge">2</code> the command below displays the two <code class="language-plaintext highlighter-rouge">VirtualMachine</code> objects that were created.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl get vms -n nodejs-ex
NAME           AGE
replicanmgjl   7m
replicarjhdz   7m
</code></pre></div></div>

<h3 id="pause-rollout">Pause rollout</h3>

<p>The <a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_vmreplicasetspec">.spec.paused</a> parameter if true pauses the deployment of the <code class="language-plaintext highlighter-rouge">VirtualMachineReplicaSet</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  paused: true
</code></pre></div></div>

<h3 id="replica-quantity">Replica quantity</h3>

<p>The <a href="https://kubevirt.io/user-guide/virtual_machines/replicaset/#using-virtualmachineinstancereplicaset">.spec.replicas</a> number of <code class="language-plaintext highlighter-rouge">VirtualMachine</code> objects that should be created.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  replicas: 0
</code></pre></div></div>

<p>The <a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_labelselector">selector</a> must be defined and match labels defined in the template. It is used by the controller to keep track of managed virtual machines.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">selector</span><span class="pi">:</span>
  <span class="na">matchExpressions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">key</span><span class="pi">:</span> <span class="s">string</span>
      <span class="na">operator</span><span class="pi">:</span> <span class="s">string</span>
      <span class="na">values</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">string</span>
  <span class="na">matchLabels</span><span class="pi">:</span> <span class="pi">{}</span>
</code></pre></div></div>

<h3 id="virtual-machine-template-spec"><a href="https://kubevirt.io/user-guide/virtual_machines/replicaset/#using-virtualmachineinstancereplicaset">Virtual Machine Template Spec</a></h3>

<p>The <code class="language-plaintext highlighter-rouge">VMTemplateSpec</code> is the definition of a <code class="language-plaintext highlighter-rouge">VirtualMachine</code> objects that will be created.</p>

<p>In the <code class="language-plaintext highlighter-rouge">VirtualMachine</code> section the <code class="language-plaintext highlighter-rouge">.spec</code> <code class="language-plaintext highlighter-rouge">VirtualMachineSpec</code> describes the available parameters for that object.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">template</span><span class="pi">:</span>
  <span class="na">metadata</span><span class="pi">:</span>
    <span class="na">annotations</span><span class="pi">:</span> <span class="pi">{}</span>
    <span class="na">labels</span><span class="pi">:</span> <span class="pi">{}</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">namespace</span><span class="pi">:</span> <span class="s">string</span>
  <span class="na">spec</span><span class="pi">:</span> <span class="pi">{}</span>
</code></pre></div></div>

<h3 id="replica-status">Replica Status</h3>

<p>Like the other objects we already have discussed <a href="http://kubevirt.io/api-reference/master/definitions.html#_v1_vmreplicasetstatus">VMReplicaSetStatus</a> is an important object to use for automation.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">status</span><span class="pi">:</span>
  <span class="na">readyReplicas</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">0</span>
</code></pre></div></div>

<p>Example using <code class="language-plaintext highlighter-rouge">--template</code> to retrieve the <code class="language-plaintext highlighter-rouge">.status.readyReplicas</code> and <code class="language-plaintext highlighter-rouge">.status.replicas</code> of <code class="language-plaintext highlighter-rouge">VirtualMachineReplicaSet</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl get vmrs replica --template "{{.status.readyReplicas}}" -n nodejs-ex
2
$ kubectl get vmrs replica --template "{{.status.replicas}}" -n nodejs-ex
2
</code></pre></div></div>

<h3 id="examples-1">Examples</h3>

<ul>
  <li><a href="https://kubevirt.io/user-guide/virtual_machines/replicaset/#example">https://kubevirt.io/user-guide/virtual_machines/replicaset/#example</a></li>
</ul>

<h2 id="virtualmachinepreset">VirtualMachinePreset</h2>

<p>This is used to define a <code class="language-plaintext highlighter-rouge">DomainSpec</code> that can be used for multiple virtual machines.</p>

<p>To configure a <code class="language-plaintext highlighter-rouge">DomainSpec</code> for multiple <code class="language-plaintext highlighter-rouge">VirtualMachine</code> objects the <code class="language-plaintext highlighter-rouge">selector</code> defines which <code class="language-plaintext highlighter-rouge">VirtualMachine</code> the <code class="language-plaintext highlighter-rouge">VirtualMachinePreset</code> should be applied to.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl get vmpreset -n nodejs-ex
NAME       AGE
m1.small   17s
</code></pre></div></div>

<h3 id="domain-spec">Domain Spec</h3>

<p>See the <code class="language-plaintext highlighter-rouge">VirtualMachine</code> section above for annotated details of the <code class="language-plaintext highlighter-rouge">DomainSpec</code> object.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>spec:
  domain: {}
</code></pre></div></div>

<h3 id="preset-selector">Preset Selector</h3>

<p>The <a href="https://kubevirt.io/user-guide/virtual_machines/presets/#virtualmachine-selector">selector</a> is optional but if not defined will be applied to all <code class="language-plaintext highlighter-rouge">VirtualMachine</code> objects; which is probably not the intended purpose so I recommend always including a selector.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">selector</span><span class="pi">:</span>
  <span class="na">matchExpressions</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">key</span><span class="pi">:</span> <span class="s">string</span>
      <span class="na">operator</span><span class="pi">:</span> <span class="s">string</span>
      <span class="na">values</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">string</span>
  <span class="na">matchLabels</span><span class="pi">:</span> <span class="pi">{}</span>
</code></pre></div></div>

<h3 id="examples-2">Examples</h3>

<ul>
  <li><a href="https://kubevirt.io/user-guide/virtual_machines/presets/#examples">https://kubevirt.io/user-guide/virtual_machines/presets/#examples</a></li>
</ul>

<p>We provided an annotated view into the KubeVirt objects - VirtualMachine, OfflineVirtualMachine, VirtualMachineReplicaSet and VirtualMachinePreset. Hopefully this will help a user of KubeVirt to understand the options and parameters that are currently available when creating a virtual machine on Kubernetes.</p>

        </article>
        
        

<a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=Kubevirt Objects&url=https://www.kubevirt.io/2018/KubeVirt-objects.html&screen_name=kubevirt" aria-label="Share this on Twitter">
  <i class="fab fa-twitter mr-1"></i> Tweet
</a>
<hr/>


      </div>
    </div>
  </div>
</div>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>
<script src="/js/photoswipe-page.js">
</script>

    </main>

    <footer class="footer" role="footer">
      <div class="container-fluid">
  <div class="row justify-content-between">
    <div class="col-sm-12 col-md-5">
      <p>We are a <a href="https://cncf.io/">Cloud Native Computing Foundation</a> sandbox project.</p>
      <p><a href="https://cncf.io/"><img src="/assets/images/cncf-color.png" alt="Cloud Native Computing Foundation"/></a></p>
    </div>
    <div class="col-sm-12 col-md-5" style="text-align: center;">
      <p class="text-md-right">

        <a href="https://twitter.com/kubevirt" data-toggle="tooltip" data-placement="top" title="Follow us on Twitter!" aria-label="Visit us on Twitter" class="link-social-twitter">
          <i class="fab fa-twitter fa-lg"></i>
        </a>

        <a href="https://kubernetes.slack.com/archives/C8ED7RKFE" data-toggle="tooltip" data-placement="top" title="Join our Slack channel!" class="link-social-slack">
          <i class="fab fa-slack fa-lg"></i>
        </a>

        <a href="https://github.com/kubevirt" data-toggle="tooltip" data-placement="top" title="Check our GitHub!" class="link-social-github">
          <i class="fab fa-github fa-lg"></i>
        </a>

        <a href="https://groups.google.com/forum/#!forum/kubevirt-dev" data-toggle="tooltip" data-placement="top" title="Join our mailing list!" class="link-social-mail">
          <i class="fas fa-envelope fa-lg"></i>
        </a>

        <a href="https://calendar.google.com/calendar/u/0/embed?src=kubevirt@cncf.io" data-toggle="tooltip" data-placement="top" title="See our events calendar!" class="link-social-calendar">
          <i class="fas fa-calendar fa-lg"></i>
        </a>

        <a href="https://www.youtube.com/channel/UC2FH36TbZizw25pVT1P3C3g/videos" data-toggle="tooltip" data-placement="top" title="Subscribe to our YouTube channel!" class="link-social-youtube">
          <i class="fab fa-youtube fa-lg"></i>
        </a>

      </p>
    </div>
  </div>
  <div class="row">
    <div class="col text-sm-left footer-licensing" style="text-align: center;">
      Copyright 2022 The KubeVirt Contributors<br>
      Copyright 2022 The Linux Foundation. All Rights Reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage">Trademark Usage</a> page.<br>
      This site is powered by <a href="https://www.netlify.com/legal/open-source-policy/">Netlify</a>.
      <p class="privacy-statement text-sm-left" style="text-align: center;">
        <a href="/privacy" class="privacy-statement-link">Privacy Statement</a>
      </p>
  </div>
</div>
<script src="/js/copy.js"></script>

    </footer>

    <script defer src="https://use.fontawesome.com/releases/v5.1.0/js/all.js" integrity="sha384-3LK/3kTpDE/Pkp8gTNp2gR/2gOiwQ6QaO7Td0zV76UFJVhqLl4Vl3KL1We6q6wR9" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
    <script src="/js/kubevirt-io.js"></script>
    <!-- Photoswipe -->
    <!-- Core JS file -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe.min.js"></script>
    <!-- UI JS file -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

    <!-- This comes from DTM/DPAL and must be latest entry in body-->

    <script type="text/javascript">
        if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
            _satellite.pageBottom();
        }
    </script>
  </body>
</html>
